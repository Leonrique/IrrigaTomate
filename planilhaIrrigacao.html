<!DOCTYPE html>
<html class="wide wow-animation" lang="en">
  <head>
    <title>irrigaTomate</title>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <!--<link rel="icon" href="images/favicon.ico" type="image/x-icon">-->
    <!-- Stylesheets-->
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/style.css">
   
    <!--[if lt IE 10]>
    <div style="background: #212121; padding: 10px 0; box-shadow: 3px 3px 5px 0 rgba(0,0,0,.3); clear: both; text-align:center; position: relative; z-index:1;"><a href="http://windows.microsoft.com/en-US/internet-explorer/"><img src="images/ie8-panel/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today."></a></div>
    <script src="js/html5shiv.min.js"></script>
    <![endif]-->
    <script language="javascript" src="login.js" ></script>
    <script type="text/javascript" src="getDadosUserLogin.js"></script>
   
    <script language="javascript">
      function verificalogin(user, senha) {
        if (user !== null)
          user = user.trim();
        else {
          alert("Digite o nome do usu\u00E1rio!");
          return;
        }

        if (senha !== null)
          senha = senha.trim();
        else {
          alert("Digite a senha!");
          return;
        }

        if (user.length == 0) {
          alert("Digite o nome do usu\u00E1rio!");
          return;
        }

        if (senha.length == 0) {
          alert("Digite a senha!");
          return;
        } else {

          GetXmlHttpObject(user, senha);
        }
      }
    </script>
  
</head>
  <body>
    <div class="preloader">
      <div class="preloader-body">
        <div class="cssload-container"><span></span><span></span><span></span><span></span>
        </div>
      </div>
    </div>
    <div class="page">
      <!-- Page Header-->
      <header class="section page-header">
        <!-- RD Navbar-->
        <div class="rd-navbar-wrap rd-navbar-modern-wrap">
          <nav class="rd-navbar rd-navbar-modern" data-layout="rd-navbar-fixed" data-sm-layout="rd-navbar-fixed" data-md-layout="rd-navbar-fixed" data-md-device-layout="rd-navbar-fixed" data-lg-layout="rd-navbar-static" data-lg-device-layout="rd-navbar-fixed" data-xl-layout="rd-navbar-static" data-xl-device-layout="rd-navbar-static" data-xxl-layout="rd-navbar-static" data-xxl-device-layout="rd-navbar-static" data-lg-stick-up-offset="46px" data-xl-stick-up-offset="46px" data-xxl-stick-up-offset="70px" data-lg-stick-up="true" data-xl-stick-up="true" data-xxl-stick-up="true">
            <div class="rd-navbar-main-outer">
              <div class="rd-navbar-main">
                <!-- RD Navbar Panel-->
                <div class="rd-navbar-panel">
                  <!-- RD Navbar Toggle-->
                  <button class="rd-navbar-toggle" data-rd-navbar-toggle=".rd-navbar-nav-wrap"><span></span></button>
                  <!-- RD Navbar Brand-->
                  <div class="rd-navbar-brand"><a class="brand" href="index.html"><img src="images/logo-default-196x47.png" alt="" width="196" height="47"/></a></div>
                </div>
                <div class="rd-navbar-main-element">
                  <div class="rd-navbar-nav-wrap">
                    <ul class="rd-navbar-nav">
                      <li class="rd-nav-item"><a class="rd-nav-link" href="index.html">Home</a>
                      </li>
                      <li class="rd-nav-item"><a class="rd-nav-link" href="sobre.html">Sobre</a>
                      </li>
                      <li class="rd-nav-item"><a class="rd-nav-link" href="planejamento.html">Planejamento</a>
                      </li>
                      <li class="rd-nav-item active"><a class="rd-nav-link" href="manejo.html">Manejo</a>
                      </li>
                      <li class="rd-nav-item"><a class="rd-nav-link" href="contato.html">Contato</a>
                      </li>
                    </ul>
                  </div>
                  <div class="rd-navbar-brand">
                    <a class="brand embrapa" href="http://www.agro.ufg.br"><img src="images/ufg-embrapa.png" alt="" /></a>
                    
                  </div>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </header>

      <!-- Breadcrumbs -->
      <section class="breadcrumbs-custom-inset">
        <div class="breadcrumbs-custom context-dark bg-overlay-39">
          <div class="container">
            <h2 class="breadcrumbs-custom-title">Manejo</h2>
            <ul class="breadcrumbs-custom-path">
              <li><a href="index.html">Home</a></li>
              <li class="active">Manejo</li>
            </ul>
          </div>
          <div class="box-position" style="background-image: url(images/bg-sobre.jpg);"></div>
        </div>
      </section>

      <section class="section section-md section-last bg-default text-md-left">
        <div class="container">
          <div class="row row-50">
            <div class="col-lg-12">
              <h4 class="text-spacing-50">Planejamento prático da irrigação do tomateiro na sua propriedade</h4>
              <div class="tabs-custom tabs-horizontal tabs-line" id="tabs-4">
                <ul class="nav nav-tabs">
                  <li class="nav-item" role="presentation"><a class="nav-link active" href="#tabs-4-1" data-toggle="tab">Manejo</a></li>
                  <li class="nav-item" role="presentation"><a class="nav-link" href="#tabs-4-2" data-toggle="tab">Orientações</a></li>
                  <li class="nav-item" role="presentation"><a class="nav-link" href="#tabs-4-3" data-toggle="tab">Minha estação</a></li>
                  <li class="nav-item" role="presentation"></li>
                  <li class="nav-item" role="presentation"></li>
                  <li class="nav-item" role="presentation"></li>
                </ul>

                <div class="tab-content">
                  <div class="tab-pane fade show active" id="tabs-4-1">
                    <form name="form1" class="rd-form rd-mailform" method="post" action>
                      <div class="row row-14 gutters-14">
                        <div class="col-sm-3">
                          <div class="form-wrap">
                            <select class="form-input" title="Identificação pivô-central / quadrante / proprietário" 
                                    name="ident" id="ident" 
                                    onchange="selectOptionValue(this)">
                              <option value="0" disabled selected hidden >Selecione um pivô</option>
                            </select>
                          </div>
                        </div>

                        <div class="col-sm-3">
                          <div class="form-wrap">
                            <input class="form-input" type="text" 
                                    name="newident" id="newident" 
                                    title="Identificação pivô-central / quadrante / proprietário" 
                                    placeholder="Novo pivô/quadrante/proprietário" />
                          </div>
                        </div>
                        
                        <div class="col-sm-6">
                          <div class="form-wrap">
                            <input class="form-input" name="calendario" id="calendario" maxlength="10" placeholder="Data de transplantio" type="text" onfocus="(this.type='date')" onblur="setDate(this.value)" data-constraints="@Required">
                          </div>
                        </div>

                        <div class="col-sm-6">
                          <div class="form-wrap">
                            <select class="form-input" name="cidade" id="cidade" data-constraints="@Required">
                            </select>
                          </div>
                        </div>

                        <div class="col-sm-6">
                          <div class="form-wrap">
                            <div class="form-input">
                              <label>Eficiência de distribuição da água do pivô-central:</label>
                              <input class="input" type="radio" value="2" name="optradio" id="efic2" checked>
                              <label class="" for="efic2">80%</label>
                              <input class="input" type="radio" value="1" name="optradio" id="efic1">
                              <label class="" for="efic1">85%</label>
                            </div>
                          </div>
                        </div>
                        
                        <div class="col-sm-6">
                          <div class="form-wrap">
                            <div class="form-input">
                              <label>Sistema de plantio:</label>
                              <input class="input" type="radio" value="2" name="optradio2" id="Ptconvencional" checked>
                              <label class="" for="Ptconvencional">Convencional</label>
                              <input class="input" type="radio" value="1" name="optradio2" id="Ptdireto">
                              <label class="" for="Ptdireto">Direto</label>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-6">
                          <div class="form-wrap">
                            <input class="form-input" name="norma"  id="norma" type="number" 
                              placeholder="Lâmina aplicada a 100% do percentímetro (mm): entre 2.0 e 7.0" min="2" max="7"  data-constraints="@Required">
                          </div>
                        </div>

                        <div class="col-sm-6">
                          <div class="form-wrap">
                            <div class="form-input">
                              <label>Tipo de solo:</label>
                              <input class="input" type="radio" value="1" name="optradio1" id="arenoso" checked>
                              <label class="" for="arenoso">Arenoso</label>
                              <input class="input" type="radio" value="2" name="optradio1" id="medio">
                              <label class="" for="medio">Médio</label>
                              <input class="input" type="radio" value="3" name="optradio1" id="argiloso">
                              <label class="" for="argiloso">Argiloso</label>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-6">
                          <div class="form-wrap">
                            <input class="form-input" name="area" id="area" placeholder="Área total do pivô (ha)" min="0" max="99999999999" maxlength="10" type="number" data-constraints="@Required">
                          </div>
                        </div>

                        <div class="col-sm-3">
                          <div class="form-wrap">
                            <div class="form-input">
                              <input class="input" type="checkbox" name="estacao" id="estacao" checked onclick="toggleStation()" >
                              <label class="" for="estacao">Estação automática</label>
                            </div>
                          </div>
                        </div>
                        
                        <!-- onchange="selectOptionValue(this)" -->

                        <div class="col-sm-3">
                          <div class="form-wrap">
                            <select class="form-input" title="Selecionar estação" 
                                    name="estacao_select" id="estacao_select" disabled>
                              <option value="0" disabled selected hidden >Selecionar estação</option>
                            </select>
                          </div>
                        </div>
                        
                      </div>
                     
                      <span class="fa fa-question-circle-o fa-4x" style="color:#f1efeb;" onmouseover="showInfo()"></span>
                      <button class="button button-primary button-pipaluk" style="float: right;" type="submit" onclick="acessarPlanilha()">Acessar</button>
                    </form>
                  </div>

                  <div class="tab-pane fade" id="tabs-4-2">
                    <p style="text-align: justify;">1.&nbsp;Na <strong>data de transplantio do tomate</strong>, o solo deve estar <strong>&uacute;mido</strong>, com bom teor de &aacute;gua ("caixa cheia"). Por ser cultivado em per&iacute;odo de escassez de chuvas, pode ser necess&aacute;rio fazer irriga&ccedil;&atilde;o pr&eacute;via para fornecer &aacute;gua ao solo. Em termos m&eacute;dios, os solos do Cerrado ret&ecirc;m 30 mm de &aacute;gua em uma profundidade de 0-30 cm. A Planilha gerada pelo&nbsp;IrrigaTomate&nbsp;foi desenvolvida para solos de textura m&eacute;dia a argilosa. Para solos arenosos, que exigem irriga&ccedil;&otilde;es mais frequentes, o usu&aacute;rio pode elaborar sua pr&oacute;pria planilha, pois s&atilde;o apresentadas as l&acirc;minas di&aacute;rias de irriga&ccedil;&atilde;o.</p>
                    <p style="text-align: justify;">2.&nbsp;Ocorrendo <strong>chuva</strong> entre a &uacute;ltima irriga&ccedil;&atilde;o e a pr&oacute;xima (duas irriga&ccedil;&otilde;es consecutivas), a quantidade da precipita&ccedil;&atilde;o pluvial, em mm, medida por pluvi&ocirc;metro instalado na &aacute;rea, deve ser <strong>subtra&iacute;da da l&acirc;mina de &aacute;gua da pr&oacute;xima irriga&ccedil;&atilde;o</strong>. Se essa precipita&ccedil;&atilde;o pluvial for maior que a l&acirc;mina da pr&oacute;xima irriga&ccedil;&atilde;o, considerar essa irriga&ccedil;&atilde;o j&aacute; atendida e n&atilde;o computar cr&eacute;ditos dos mm de &aacute;gua excedentes em irriga&ccedil;&otilde;es futuras.</p>
                    <p style="text-align: justify;">3.&nbsp;Caso a l&acirc;mina necess&aacute;ria de irriga&ccedil;&atilde;o, principalmente nos est&aacute;dios iniciais da cultura do tomate ou quando ocorrer chuvas, seja <strong>menor do que a l&acirc;mina aplicada pelo piv&ocirc;-central a 100% de velocidade</strong>, operar o piv&ocirc;-central a 100% de velocidade e n&atilde;o considerar os mm de &aacute;gua excedentes. Para atender a l&acirc;mina de &aacute;gua de irriga&ccedil;&atilde;o, regular o percent&iacute;metro do piv&ocirc;-central, baseando-se na l&acirc;mina de &aacute;gua de irriga&ccedil;&atilde;o aplicada pelo equipamento a 100%, pela rela&ccedil;&atilde;o: <strong>Regulagem do percent&iacute;metro (%) = (L&acirc;mina de irriga&ccedil;&atilde;o a 100% / L&acirc;mina de irriga&ccedil;&atilde;o necess&aacute;ria) x 100.</strong></p>
                    <p style="text-align: justify;">4.&nbsp;Na Planilha do manejo pr&aacute;tico da irriga&ccedil;&atilde;o gerado est&atilde;o "em verde" as datas, e as l&acirc;minas brutas de irriga&ccedil;&atilde;o e as regulagens do percent&iacute;metro do piv&ocirc;-central para a aplica&ccedil;&atilde;o da l&acirc;mina de &aacute;gua necess&aacute;ria, assim como o total de &aacute;gua aplicado no ciclo da cultura.</p>
                    <p style="text-align: justify;">5.&nbsp;A Planilha foi elaborada (o calend&aacute;rio foi elaborado) para o transplantio variando de 01 de fevereiro a 01 de julho, &eacute;poca mais apropriada para transplantio de tomate em Goi&aacute;s. Recomenda-se registrar o total de horas trabalhadas pelo sistema pelo registro inicial e final das leituras no hor&iacute;metro do piv&ocirc;-central.</p>
                  </div>
                  
                  <div class="tab-pane fade" id="tabs-4-3">
                    <form name="formEstacao" class="rd-form rd-mailform" method="post" action>
                      <div class="row row-14 gutters-14">
                        <div class="col-sm-4">
                          <div class="form-wrap">
                            <input class="form-input" type="text" 
                                    name="station_name" id="station_name" 
                                    title="Nome da estação" 
                                    placeholder="Nome da estação" data-constraints="@Required" minlength="3" maxlength="60"/>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-wrap">
                            <input class="form-input" type="text" 
                                    name="station_id" id="station_id" 
                                    title="Identificador da estação (FieldClimate)" 
                                    placeholder="Identificador da estação (FieldClimate)" data-constraints="@Required" minlength="3" maxlength="20"/>
                          </div>
                        </div>
                        
                        <div class="col-sm-4">
                          <div class="form-wrap">
                            <select class="form-input" name="cidadeEstacao" id="cidadeEstacao" data-constraints="@Required">
                            </select>
                          </div>
                        </div>

                        
                      </div>
                      
                      <button class="button button-primary button-pipaluk" style="float: right;" type="submit" onclick="gravarEstacao()">Gravar estação</button>

                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Page Footer-->
      <footer class="section footer-variant-2 footer-modern context-dark section-top-image section-top-image-dark">
        <div class="footer-variant-2-content">
          <div class="container">
            <div class="row row-40 justify-content-between">
              <div class="col-sm-6 col-lg-4 col-xl-3">
                <div class="oh-desktop">
                  <div class="wow slideInRight" data-wow-delay="0s">
                    <div class="footer-brand"><a href="index.html"><img src="images/logo-inverse-196x42.png" alt="" width="196" height="42"/></a></div>
                    <p>irrigaTomate é uma ferramenta para auxiliar o produtor a realizar o manejo da irrigação na cultura do tomate.</p>
                    <ul class="footer-contacts d-inline-block d-md-block">
                      <li>
                        <div class="unit unit-spacing-xs">
                          <div class="unit-left"><span class="icon fa fa-phone"></span></div>
                          <div class="unit-body"><a class="link-phone" href="tel:#">+55 62 9999 30476</a></div>
                        </div>
                      </li>
                      <li>
                        <div class="unit unit-spacing-xs">
                          <div class="unit-left"><span class="icon fa fa-envelope-o"></span></div>
                          <div class="unit-body">
                            <p>josealvesufg@ufg.br</p>
                          </div>
                        </div>
                      </li>
                      <li>
                        <div class="unit unit-spacing-xs">
                          <div class="unit-left"><span class="icon fa fa-location-arrow"></span></div>
                          <div class="unit-body"><a class="link-location" href="#">Universidade Federal de Goiás - UFG </br> Escola de Agronomia, </br> Goiânia, Goiás</a></div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-lg-4 col-xl-4">
                <div class="oh-desktop">
                  <div class="inset-top-18 wow slideInDown" data-wow-delay="0s">
                    <h5>Acesse o manejo</h5>
                    <p>Informe seu usuário e senha nos campos abaixo.</p>
                    <form class="rd-form rd-mailform" name="form2"  method="post" action>
                      <div class="form-wrap">
                        <input class="form-input" id="user_login" type="text" name="user_login" data-constraints="@Required">
                        <label class="form-label" for="user_login">Informe seu usuário</label>
                      </div>
                      <div class="form-wrap">
                        <input class="form-input" id="senha_login" type="password" name="senha_login" data-constraints="@Required">
                        <label class="form-label" for="senha_login">Digite sua senha</label>
                      </div>
                      <button class="button button-block button-white" type="button" onclick="verificalogin(document.form2.user_login.value, document.form2.senha_login.value)">Acessar</button>
                    </form>
                    <div class="group-lg group-middle">
                      <p class="text-white">Não possui conta? <a class="link-cadastro" href="cadastrar.html"> Cadastre-se</a></p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-xl-3">
                <div class="oh-desktop">
                  <div class="inset-top-18 wow slideInLeft" data-wow-delay="0s">
                    <h5>Apoio</h5>
                    <div class="row row-10 gutters-10" data-lightgallery="group">
                      <div class="col-6 col-sm-3 col-lg-6">
                        <!-- Thumbnail Classic-->
                        <article class="thumbnail thumbnail-mary">
                          <div class="thumbnail-mary-figure"><img src="images/gallery-image-1-129x120.jpg" alt="" width="129" height="120"/>
                          </div>
                          <div class="thumbnail-mary-caption"><a class="icon fl-bigmug-line-zoom60" href="images/gallery-original-7-800x1200.jpg" data-lightgallery="item"><img src="images/gallery-image-1-129x120.jpg" alt="" width="129" height="120"/></a>
                          </div>
                        </article>
                      </div>
                      <div class="col-6 col-sm-3 col-lg-6">
                        <!-- Thumbnail Classic-->
                        <article class="thumbnail thumbnail-mary">
                          <div class="thumbnail-mary-figure"><img src="images/gallery-image-2-129x120.jpg" alt="" width="129" height="120"/>
                          </div>
                          <div class="thumbnail-mary-caption"><a class="icon fl-bigmug-line-zoom60" href="images/gallery-original-8-1200x800.jpg" data-lightgallery="item"><img src="images/gallery-image-2-129x120.jpg" alt="" width="129" height="120"/></a>
                          </div>
                        </article>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer-variant-2-bottom-panel">
          <div class="container">
            <!-- Rights-->
            <div class="group-sm group-sm-justify">
              <p class="rights"><span>&copy;&nbsp;</span><span class="copyright-year"></span> <span>Embrapa Arroz e Feijão - UFG</span>. Todos os direitos reservados
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <!-- Global Mailform Output-->
    <div class="snackbars" id="form-output-global"></div>
    <!-- Javascript-->
    <script src="js/core.min.js"></script>
    <script src="js/script.js"></script>
    <script src="js/cidades.js"></script>
    <script src="js/package/dist/sweetalert2.all.js"></script>
  </body>

  <script language="javascript">
      var mesInicial = 1;
      var mesFinal = 6;
      var xmlHttpObject = XMLHttpRequest;
      var otpions = [];

      function popularCidades(idControle){
        let cidades = getAllCities();
        let select_cidade = document.getElementById(idControle);
        
        for (var i = 0; i < cidades.length; i++) {
          var option = document.createElement("option");
          
          option.text = cidades[i].label;
          option.value = cidades[i].id;
          select_cidade.appendChild(option);
        }
      }

      function identificacaoPivot(nomePivot) {
        var idCidadeZ = [];
        var identificacaoZ = [];
        var idPivotZ = [];
        var dataPlantioZ = [];
        var eficienciaZ = [];
        var laminaAplicadaZ = [];
        var tipoPlantioZ = [];
        var tipoSoloZ = [];
        var areaPivotZ = [];
        var numRegistrosZ;

        if(sessionStorage.getItem("numRegistrosZ") == undefined){
          return;
        }

        numRegistrosZ = sessionStorage.getItem("numRegistrosZ");
        idCidadeZ = sessionStorage.getItem("idCidadeZ").split(",");
        identificacaoZ = sessionStorage.getItem("identificacaoZ").split(",");
        idPivotZ = sessionStorage.getItem("idPivotZ").split(",");
        dataPlantioZ = sessionStorage.getItem("dataPlantioZ").split(",");
        eficienciaZ = sessionStorage.getItem("eficienciaZ").split(",");
        laminaAplicadaZ = sessionStorage.getItem("laminaAplicadaZ").split(",");
        tipoPlantioZ = sessionStorage.getItem("tipoPlantioZ").split(",");
        tipoSoloZ = sessionStorage.getItem("tipoSoloZ").split(",");
        areaPivotZ = sessionStorage.getItem("areaPivotZ").split(",");

        var i, j;

        nomePivot = nomePivot.trim();
        for (i = 1; i <= numRegistrosZ; i++) {

          identificacaoZ[i] = identificacaoZ[i].trim();
          if (nomePivot == identificacaoZ[i]) {
            j = i;
            i = numRegistrosZ + 1;
          }
        }
        
        if(j == undefined){
          return;
        }

        if (document.getElementById("cidade").options.length !== null && document.getElementById("cidade").options.length !== undefined){
          numCidades = document.getElementById("cidade").options.length;

          for (i = 1; i <= numCidades; i++) {
            if (document.getElementById("cidade").options[i].value == idCidadeZ[j]) {
              s = i;
              i = 7000;
              break;
            }
          }
        }

        document.getElementById("calendario").value = dataPlantioZ[j]; //verificar se eh i ou j
        document.getElementById("area").value = areaPivotZ[j];
        document.getElementById("ident").value = identificacaoZ[j];
        document.getElementById("cidade").selectedIndex = s;
        document.getElementById("norma").value = laminaAplicadaZ[j];

        document.getElementById("arenoso").checked = false;
        document.getElementById("medio").checked = false;
        document.getElementById("argiloso").checked = false;
        
        switch(tipoSoloZ[j]){
          case "1":
            document.getElementById("arenoso").checked = true;
            break;
          case "2":
            document.getElementById("medio").checked = true;
            break;
          case "3":
            document.getElementById("argiloso").checked = true;
            break;
        }

        document.getElementById("Ptdireto").checked = false;
        document.getElementById("Ptconvencional").checked = false;

        if (tipoPlantioZ[j] == 1){
          document.getElementById("Ptdireto").checked = true;
        }
        else if (tipoPlantioZ[j] == 2){
          document.getElementById("Ptconvencional").checked = true;
        }
        
        document.getElementById("efic2").checked = false;
        document.getElementById("efic1").checked = false;

        if (eficienciaZ[j] == 1){
          document.getElementById("efic1").checked = true;
        }
        else if (eficienciaZ[j] == 2){
          document.getElementById("efic2").checked = true;
        }

        document.getElementById("calendario").value = dataPlantioZ[j];
      }

      document.addEventListener('DOMContentLoaded', function () {
        setUserIdentifications();
        setStations();
        popularCidades("cidade")
        popularCidades("cidadeEstacao")
      }, false);

      function setUserIdentifications() {
        var userOptions = sessionStorage.getItem("selectBoxOptions2");

        if (userOptions != undefined) {
          userOptions = userOptions.split(";");

          for (var i = 0; i < userOptions.length; i++) {
            var option = document.createElement("option");
            
            option.text = userOptions[i];
            option.value = userOptions[i];
            document.getElementById("ident").appendChild(option);
          }
        }
      }

      function setStations() {
        let stations = sessionStorage.getItem("estacoes");
        
        if (stations == undefined) {
          return;
        }

        stations = stations.split("|");

        for (let counter = 0; counter < stations.length; counter++) {
          let option = document.createElement("option");
          let stationInfo = stations[counter].split(";");

          option.text = stationInfo[3] + ' ' + stationInfo[2];
          option.value = stationInfo[3];
          document.getElementById("estacao_select").appendChild(option);
        }
      }

      function selectOptionValue(input)
      {
        identificacaoPivot(input.value);
      }

      function limparSelecaoPivo(input) {
        input.value='';
      }

      function showInfo() {
        var elementName = document.activeElement.name;

        if (!(elementName == undefined)) {
          switch (elementName) {
            case "calendario":
              msgDataPlantio();
              break;
            case "optradio":
              textoEficiencia();
              break;
            case "optradio2":
              msgPlantio();
              break;
            case "norma":
              msgPercentimetro();
              break;
            case "optradio1":
              msgTipoSolo();
              break;
            case "area":
              textoAreaTotal();
              break;
          }
        }
      }

      function setDate(value) {
        if(value.indexOf("/") != -1){
          return true;
        }

        var timestamp = Date.parse(value);
        var input = document.getElementById("calendario");

        input.type = "text";
        
        if (!isNaN(timestamp)) {
          var data = new Date(timestamp);
          data = new Date(data.getTime() + Math.abs(data.getTimezoneOffset()*60000))

          var dia = data.getDate();
          var mes = data.getMonth();

          if (parseInt(mes) < mesInicial || parseInt(mes) > mesFinal) {
        alert('Escolha um m\u00EAs entre fevereiro e julho.\nOs dias podem variar de 01/02 a 20/07.');
            resetDate(input);
            return false;
          }
          else {
            if (parseInt(mes) == mesFinal && parseInt(dia) > 20) {
              alert('Para o m\u00EAs de julho, dia 20 \u00E9 o \u00FAltimo dia recomendado.');
              resetDate(input);
              return false;
            }
          }

          dia = data.getDate().toString().padStart(2, '0'),
          mes = (data.getMonth() + 1).toString().padStart(2, '0'), //+1 pois no getMonth Janeiro começa com zero.
          ano = data.getFullYear();
          
          if (ano < 1900 || ano > 2100){
            alert("A data informada não é válida.");
            resetDate(input);
            return false;
          }
          
          input.value = dia + "/" + mes + "/" + ano;
          return true;
        }
      }

      function resetDate(input) {
        input.value = "";
        input.type = "date"
        input.focus();
      }

      function msgTipoSolo() {
        msg = "<p style='color:black; text-align:justify' ><span style='color:green'>Arenoso:</span> areia Franca, 10 a 15% de argila.<br><span style='color:green'>M&eacute;dio:</span> franco, 15 a 30% de argila.<br><span style='color:green'>Argiloso:</span> textura argilosa, 40 a 60% de argila.</p>";
        Swal.fire({ position: 'top-end', html: msg });
      }

      function textoAreaTotal() {
        msg = "<p style='color:black; text-align:justify' >Digite a &aacute;rea total do piv&ocirc; central, em hectares, mesmo que o plantio tenha sido feito em apenas um quadrante o ou em \"meia-lua\".";
        Swal.fire({  position: 'top-end', html:  msg});
      }

      function textoPlantioDireto() {
        document.getElementById("tipoPlantio").style.display = "inline";
        document.getElementById("tipoPlantio").style.color = "black";
        document.getElementById("tipoPlantio").style.backgroundColor = "#dff0d8";
        document.getElementById("tipoPlantio").style.borderColor = "#d6e9c6";
        msg = "<br><br>Com palha na superf&iacute;cie do solo. Sistema de preparo reduzido ou cultivo m&iacute;nimo do solo.<br>";
        document.getElementById("tipoPlantio").innerHTML = msg;
        setTimeout(function () { document.getElementById("tipoPlantio").style.display = "none" }, 5000);
      }

      function textoPlantioConvencional() {

        document.getElementById("tipoPlantio").style.display = "inline";
        document.getElementById("tipoPlantio").style.color = "black";
        document.getElementById("tipoPlantio").style.backgroundColor = "#dff0d8";
        document.getElementById("tipoPlantio").style.borderColor = "#d6e9c6";
        msg = "<br><br>Sem palha na superf&iacute;cie do solo<br>";
        document.getElementById("tipoPlantio").innerHTML = msg;
        setTimeout(function () { document.getElementById("tipoPlantio").style.display = "none" }, 5000);

      }

      function msgPlantio() {

        msg = "<p style='color:black; text-align:justify' ><span style='color:green'>Plantio Direto:</span> com palha na superf&iacute;cie do solo. Sistema de preparo reduzido ou cultivo m&iacute;nimo do solo.<br><span style='color:green'><br>Plantio Convencional:</span> sem palha na superf&iacute;cie do solo </p>";
        Swal.fire({ position: 'top-end', html: msg });
      }

      function msgDataPlantio() {


        msg = "<p style='color:black; text-align:justify' >O per&iacute;odo de transplantio de tomate em Goi&aacute;s &eacute; de 01/Fevereiro a 15/Julho, devido &agrave; sensibilidade das plantas ao molhamento foliar e &agrave; alta umidade relativa do ar.</p>";
        Swal.fire({ position: 'top-end', html: msg });
      }

      function msgPercentimetro() {

        msg = "<p style='color:black; text-align:justify' >Digite a l&acirc;mina m&iacute;nima (2 a 7 mm) de irriga&ccedil;&atilde;o aplicada pelo piv&ocirc; central. <br>L&acirc;mina para quando o piv&ocirc; opera na m&aacute;xima velocidade (rel&ecirc; percentual a 100%).</p>";
        Swal.fire({ position: 'top-end', html: msg });
        /*
                  msg = "<p style='color:black; background-color:#dff0d8; border-color:#d6e9c6; text-align:justify' >Digite a l&acirc;mina m&iacute;nima (2 a 7 mm) de irriga&ccedil;&atilde;o aplicada pelo piv&ocirc; central. <br>L&acirc;mina para quando o piv&ocirc; opera na m&aacute;xima velocidade (rel&ecirc; percentual a 100%).</p>";
                  document.getElementById("msgPercentimetro").style.display = "inline";
                  pixel0 = document.getElementById("conteudoPrincipal2").style.height;
                  pixels =  parseInt(document.getElementById("conteudoPrincipal2").style.height) + 100;
                  pixels2 = pixels+"px";
                  document.getElementById("conteudoPrincipal2").style.height =  pixels2;
                  document.getElementById("msgPercentimetro").innerHTML = msg;
                  setTimeout( function() { document.getElementById("msgPercentimetro").style.display="none"; document.getElementById("conteudoPrincipal2").style.height = pixel0;  } , 5000 );
        */
      }
      function textoEficiencia() {

        texto = "<b style=\"color:green; text-align: justify;\">Efici&ecirc;ncia de aplica&ccedil;&atilde;o de &aacute;gua (EA) do sistema de irriga&ccedil;&atilde;o Piv&ocirc; Central</b><br>";
        texto = texto + "<p style=\"text-align: justify;\" >Normalmente, esse valor &eacute; 80 ou 85%, e pode ser verificado em campo com o teste de uniformidade de aplica&ccedil;&atilde;o de &aacute;gua (CUC e CUD), seguindo as recomenda&ccedil;&otilde;es t&eacute;cnicas (ABNT). </p>";
        texto = texto + "<p style=\"text-align: justify;\" >EA = CUC x 0,95    ...........................(1)<br>";
        texto = texto + "Ou <br>";
        texto = texto + "EA = CUD  ......................................(2)</p>";
        texto = texto + "<p style=\"text-align: justify;\" >em que: <br><br>";
        texto = texto + "CUC = coeficiente de uniformidade de Christiansen; <br><br>";
        texto = texto + "0,95 = Fator de perda combinada de &aacute;gua por evapora&ccedil;&atilde;o e arrastamento pelo vento (em condi&ccedil;&otilde;es de ETo = 5 mm/dia e vento de 2,0 m/s)<br><br>";
        texto = texto + "CUD = Coeficiente de Distribui&ccedil;&atilde;o de &aacute;gua </p>";

        texto = texto + "<p style=\"text-align: justify;\" ><span style=\"color:green\" >ATEN&Ccedil;&Atilde;O:</span> A uniformidade de aplica&ccedil;&atilde;o de &aacute;gua &eacute; influenciada por v&aacute;rios fatores, tais como: varia&ccedil;&otilde;es na vaz&atilde;o dos aspersores ao longo da tubula&ccedil;&atilde;o a&eacute;rea; varia&ccedil;&otilde;es nas condi&ccedil;&otilde;es do vento; varia&ccedil;&otilde;es na velocidade de rota&ccedil;&atilde;o e varia&ccedil;&otilde;es nos bocais dos aspersores (Tamanho de gota, altura de aplica&ccedil;&atilde;o, di&acirc;metro molhado, e inclina&ccedil;&atilde;o).";
        texto = texto + "<br><br>Mantenha os bocais na sequ&ecirc;ncia de projeto e os bocais e os reguladores de press&atilde;o sem entupimento; abra regularmente o tamp&atilde;o da extremidade final do piv&ocirc; para limpeza de arraste da tubula&ccedil;&atilde;o; n&atilde;o permita que a v&aacute;lvula de suc&ccedil;&atilde;o fique enterrada no barro; Opere o piv&ocirc; sempre na press&atilde;o correta.</p>";

        Swal.fire({ position: 'top-end', html: texto });
      }

      // $(function () {
      //   // Ver em 
      //   // https://api.jqueryui.com/datepicker/
      //   // para mais informacoes 
      //   //      

      //   var d = new Date();
      //   var mes = d.getMonth() + 1;
      //   var dia = d.getDate();
      //   if (mes > mesFinal || (mes == mesFinal && dia >= 2))
      //     var year = d.getYear() + 1900 + 1;
      //   else
      //     var year = d.getYear() + 1900;

      //   $("#calendario").datepicker({
      //     //dateFormat: 'dd/mm/yy',
      //     dateFormat: 'dd/mm',
      //     dayNames: ['Domingo', 'Segunda', 'Terca', 'Quarta', 'Quinta', 'Sexta', 'Sabado', 'Domingo'],
      //     dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
      //     dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S&aacute;b', 'Dom'],
      //     monthNames: ['Janeiro', 'Fevereiro', 'Mar&ccedil;o', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
      //     monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
      //     minDate: new Date(year, mesInicial - 1, 01),
      //     maxDate: new Date(year, mesFinal - 1, 01),
      //     defaultDate: new Date(year, mesInicial - 1, 01),
      //     altFormat: "dd/mm/yy",
      //     duration: "fast", // fast, normal, slow
      //     beforeShow: function () {
      //       $(".ui-datepicker").css('font-size', 12)
      //     }

      //   });
      // });

      function valida() {

        numero = (typeof document.getElementById("norma").value === "undefined") ? "" : document.getElementById("norma").value;
        numero = numero.trim();

        if (numero.length == 0) {

          alert('O valor da l\u00E2mina aplicada a 100% do percent\u00EDmetro \nn\u00E3o deve ser nulo. Insira um valor entre 2.0 e 7.0');
          return 0;
        }

        var n = numero.search(/[a-zA-Z]/i);
        if (n >= 0) {
          alert('O valor da l\u00E2mina aplicada a 100% do percentt\u00EDmetro n\u00E3o deve ter letras.');
          return 0;
        }
        else {
          n = numero.search(/,/);
          if (numero.charAt(n) == ',') {

            numero = numero.replace(/[,]/ig, ".");
            document.getElementById("norma").value = numero;

          }
          if (parseFloat(numero) < 2.00 || parseFloat(numero) > 7.00) {
            alert(' Escolha um valor entre 2.0 e 7.0 para informação da l\u00E2mina a ser aplicada.');
            return 0
          }
          else
            return 1;
        }
      }
      function inicializa() {

        //
        // Limitar o calendario para 01-04 a 20-06 do corrente ano
        //
        getCidades(9);

        var today = new Date();
        var ano = today.getFullYear();
        //document.getElementById("data1").setAttribute("max", ano + "-06-20");
        //document.getElementById("data1").setAttribute("min", ano + "-04-01");


        if (sessionStorage.getItem('placeZZ') !== null)
          document.getElementById("norma").placeholder = "";

        if (sessionStorage.getItem('identificacaoZZ') !== null) {
          document.getElementById("ident").value = sessionStorage.getItem("identificacaoZZ");
        }

        if (sessionStorage.getItem('dataSemeaduraZZ') !== null)
          document.getElementById("calendario").value = sessionStorage.getItem("dataSemeaduraZZ");

        if (sessionStorage.getItem('laminaAplicadaZZ') !== null)
          document.getElementById("norma").value = sessionStorage.getItem("laminaAplicadaZZ");

        //sessionStorage.setItem("cicloVegetativo", cicloVegetativo);

        if (sessionStorage.getItem('eficienciaZZ') !== null) {

          opcao = sessionStorage.getItem("eficienciaZZ");
          if (opcao == 1)
            document.getElementById("efic1").checked = true;
          else
            if (opcao == 2)
              document.getElementById("efic2").checked = true;
            else {

              document.getElementById("efic2").checked = false;
              document.getElementById("efic1").checked = false;
            }
        } // fim de  if (sessionStorage.getItem('eficienciaZZ') !== null ) {

        if (sessionStorage.getItem('sistemaPlantioZZ') !== null) {

          opcao = sessionStorage.getItem("sistemaPlantioZZ");
          if (opcao == 1)
            document.getElementById("plantio1").checked = true;
          else
            if (opcao == 2)
              document.getElementById("plantio2").checked = true;
            else {

              document.getElementById("plantio1").checked = false;
              document.getElementById("plantio2").checked = false;
            }
        } // fim de  if (sessionStorage.getItem('sistemaPlantioZZ') !== null ) {


        if (sessionStorage.getItem('cidadeZZ') !== null) {
          setTimeout(function () { document.getElementById("cidade").selectedIndex = sessionStorage.getItem('cidadeZZ'); }, 800);


        }

      } // fim de function inicializa() {

      function verificaData() {

        //dataInicial = document.getElementById("data1").value;
        dataInicial = document.getElementById('calendario').value
        dataInicial = dataInicial.trim();
        var dia = parseInt(dataInicial.substring(0, 2));
        var mes = parseInt(dataInicial.substring(3, 5))-1;

        if (mes < mesInicial || mes > mesFinal){
          alert('Escolha um m\u00EAs entre fevereiro e julho.\nOs dias podem variar de 01/02 a 01/07.');
        }
        else {
          if (mes == mesFinal && dia > 1){
            alert('Para o m\u00EAs de julho, dia 01 \u00E9 o \u00FAltimo dia recomendado.');
          }
          else{
            document.getElementById('calendario').style.paddingLeft = "75px";
          }
        }
      }

      function municipios() {

        var id = document.getElementById("estado").selectedIndex;
        var opcao = parseInt(document.getElementById("estado").options[id].value);

        if (opcao == 2) // goias
        {
          getCidades(9);

        }
        else
          if (opcao == 3) // Mato Grosso 
          {

            getCidades(11);
          }
          else
            if (opcao == 5) // Minas Gerais
            {
              getCidades(13);

            }
            else
              if (opcao == 6) // Sao Paulo
              {
                getCidades(25);
              }
      }
    
    function validaArea() {
        numero = (typeof document.getElementById("area").value === "undefined ") ? "" : document.getElementById("area").value;
        numero = numero.trim();
        if (numero.length == 0) {

          alert('Insira o valor da \u00E1rea.');
          return 0;
        }
        flag = 1;
        cont = 0;
        while (flag) {

          n = numero.search(/,/);
          if (numero.charAt(n) == ',') {

            numero = numero.replace(/[,]/ig, ".");
            document.getElementById("area").value = numero;
            cont = cont + 1;
          }
          else
            flag = 0;
        }
        if (cont > 1) {
          alert('N\u00FAmero com mais de uma v\u00EDrgula. \nInsira o valor da \u00E1rea com apenas um ponto para separar as casas decimais.');
          return 0;
        }
        if (isNaN(numero)) {

          alert('O valor da \u00E1rea deve ter caractere n\u00E3o num\u00E9rico. ');
          return 0;
        }
        else
          if (parseFloat(numero) >= 0)
            return 1;
          else {

            alert('O valor da \u00E1rea deve ser um n\u00FAmero positivo. ');
            return 0;
          }
      }

      function validaNorma() {
        numero = (typeof document.getElementById("norma").value === "undefined ") ? "" : document.getElementById("norma").value;
        numero = numero.trim();

        if (numero.length == 0) {

          alert('O valor da l\u00E2mina aplicada a 100% do percent\u00EDmetro \nn\u00E3o deve ser nulo. Insira um valor entre 2.0 e 7.0');
          return 0;
        }

        var n = numero.search(/[a-zA-Z]/i);
        if (n >= 0) {
          alert('O valor da l\u00E2mina aplicada a 100% do percent\u00EDmetro n\u00E3o deve ter letras.');
          return 0;
        }
        else {
          n = numero.search(/,/);
          if (numero.charAt(n) == ',') {

            numero = numero.replace(/[,]/ig, ".");
            document.getElementById("norma").value = numero;

          }
          if (isNaN(numero)) {
            alert('O valor passado n\u00E3o \u00E9 um n\u00FAmero. Confira! ');
            return 0;
          }
          else {
            if (parseFloat(numero) < 2.00 || parseFloat(numero) > 7.00) {
              alert(' Escolha um valor entre 2.0 e 7.0 para informação da l\u00E2mina a ser aplicada.');
              return 0;
            }
            else {
              return 1;
            }
          }
        }
      }

      function retornarRequestObject() {
        if (window.XMLHttpRequest) { // FireFox, Mozilla, Safari,...
            xmlHttpObject = new XMLHttpRequest();
            if (xmlHttpObject.overrideMimeType) {
                xmlHttpObject.overrideMimeType('text/xml');
            }
        } else if (window.ActiveXObject) { // Internet Explorer
            try {
                xmlHttpObject = new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer 5.5+
            } catch (e) {
                try {
                    xmlHttpObject = new ActiveXObject("Microsoft.XMLHTTP"); //Internet Explorer 5.5-
                } catch (e) {}
            }
        }

        if (!xmlHttpObject) {
            alert('Imposs\u00EDvel criar inst\u00E2ncia do objeto XMLHttpResquest.');
            return false;
        }
        
        return xmlHttpObject;
      }

      function checkIfStationAlreadyExists(givenStationId){
        let stations = document.getElementById("estacao_select");

        if(stations.options.length <= 1){
          return false
        }

        for (let index = 1; index < stations.options.length; index++) {
          const stationId = stations.options[index].text.split(" ")[0];
          
          if(givenStationId == stationId){
            return true;
          }
        }

        return false;
      }

      async function gravarEstacao(){
        let station_name = document.getElementById("station_name").value;
        let station_id = document.getElementById("station_id").value;
        let city_id = document.getElementById("cidadeEstacao").value;

        if(station_name == undefined || station_name == ""){
          event.preventDefault();
          alert("Informe o nome da estação.");
          document.getElementById("station_name").focus();
          return false;
        }
        
        if(station_id == undefined || station_id == ""){
          event.preventDefault();
          alert("Informe o identificador da estação.");
          document.getElementById("station_id").focus();
          return false;
        }
        
        if(!city_id || city_id < 1 ){
          event.preventDefault();
          alert("Informe a cidade para a estação.");
          document.getElementById("cidadeEstacao").focus();
          return false;
        }

        if(checkIfStationAlreadyExists(station_id)){
          event.preventDefault();
          alert(`Já existe a estação ${station_id} cadastrada para o usuário logado.`);
          document.getElementById("station_id").focus();
          return false;
        }

        let url = 'cadastroEstacoes.php?idUser='+sessionStorage.getItem("idUser")+'&station_name='+station_name+'&station_id='+station_id+'&city_id='+city_id;

        let response = await cadastrarEstacao(url);
        let message = getValuesFromResponse(response, "<message>", "</message>")
        
        if(message != ""){
          alert(message);
        }
        
        let stations = getValuesFromResponse(response, "<estacao>", "</estacao>")

        if(stations != ""){
          sessionStorage.setItem("estacoes", stations);
          setStations()
        }

        return true;
      }

      function getValuesFromResponse(response, opentag, closetag){
          let texto = response;
          let j = texto.indexOf(opentag);
          let s = opentag.length;
          let i = texto.length;

          let texto2 = "";
          for (k = j + s; k < i; k++)
              texto2 = texto2 + texto.charAt(k);

          texto2 = texto2 + "";
          let texto3 = "";

          j = texto2.indexOf(closetag);
          for (k = 0; k < j; k++)
              texto3 = texto3 + texto2.charAt(k);

          texto3 = texto3 + "";
          texto3 = texto3.trim();

          return texto3
      }

      function cadastrarEstacao(url){
        return new Promise(function(resolve, reject){
          xmlHttpObject = retornarRequestObject();

          xmlHttpObject.open('GET', url); //executa a chamada no servidor

          xmlHttpObject.onload = function(){
            var status = xmlHttpObject.status;
            if (status == 200) {
                resolve(xmlHttpObject.response.replace("\r\n", ""));
            } else {
                reject(status);
            }
          }; 

          xmlHttpObject.send(null); // envia parametros ao servidor se for pelo metodo POST
        })
      }

      function acessarPlanilha() {
        var cidade;
        var flag;
        var identifier = document.getElementById("newident").value;
        var estacao_select = document.getElementById("estacao_select");

        let estacao = "";

        if(estacao_select.selectedIndex > 0){
          estacao = estacao_select.options[estacao_select.selectedIndex].value;
        }

        if(identifier == undefined || identifier == ""){
          identifier = document.getElementById("ident").value;
        }

        if(!setDate(document.getElementById("calendario").value)){
          return;
        }

        id = document.getElementById("cidade").selectedIndex;

        if (parseInt(id) == -1) {
          alert("Escolha o munic\u00EDpio.");
          return 
          flag = 0;
        }

        opcao = document.getElementById("cidade").options[id].value;
        cidade = id;
        idCidade = parseInt(opcao);
        if (parseInt(opcao) == 0) {

          alert("Escolha o munic\u00EDpio.");
          flag = 0;
        }
        else {

          if (document.getElementById("calendario") === undefined || document.getElementById("calendario") === null) {

            alert("Escolha uma data inicial.");
            flag = 0;
          }
          else
            if (document.getElementById("calendario").value == "") {

              alert("Escolha a data de plantio.");
              flag = 0;
            }
            else {
              opcao = 0;
              
              if (document.getElementById("efic1").checked === true) {
                opcao = 1;
              }

              if (document.getElementById("efic2").checked === true) {
                opcao = 2;
              }

              eficiencia = parseInt(opcao);
              if (parseInt(opcao) == 0) {

                alert("Escolha um valor para efici\u00EAncia.");
                flag = 0;
              }
              else {

                if (!validaNorma()) {

                  flag = 0;

                }
                else {

                  dataInicial = document.getElementById("calendario").value;
                  dataInicial = dataInicial.trim();
                  dia1 = parseInt(dataInicial.substring(0, 2));
                  mes1 = parseInt(dataInicial.substring(3, 5))-1;

                  if (mes1 < mesInicial || mes1 > mesFinal) {

                    alert('Escolha um m\u00EAs entre fevereiro e julho.\nOs dias podem variar de 01/02 a 20/07.');
                    flag = 0;
                  }
                  else
                    if (mes1 == mesFinal && dia1 > 20) {

                      alert('Para o m\u00EAs de julho, dia 20 é o \u00FAltimo dia permitido');
                      flag = 0;

                    }
                    else {

                      if (identifier === undefined) {

                        alert('O campo relativo a identifica\u00E7\u00E3o  piv\u00F4-central/ quadrante / propriet\u00E1rio \nn\u00E3o pode ser vazio.');
                        flag = 0;
                      }
                      else {
                        identifier = identifier.trim();
                      }
                      if (identifier == "") {

                        alert('O campo relativo a identifica\u00E7\u00E3o  piv\u00F4-central/ quadrante / propriet\u00E1rio \nn\u00E3o pode ser vazio.');
                        flag = 0;
                      }
                      else {


                        if (document.getElementById("arenoso").checked === true) {
                          solo1 = 1;
                        }
                        else
                          if (document.getElementById("medio").checked === true) {
                            solo1 = 2;
                          }
                          else
                            if (document.getElementById("argiloso").checked === true) {
                              solo1 = 3;
                            }
                            else
                              solo1 = 0;


                        solo = parseInt(solo1);
                        if (parseInt(solo) == 0) {

                          alert("Escolha o tipo de solo.");
                          flag = 0;
                        }
                        else {

                          if (document.getElementById("Ptdireto").checked === true) {
                            plantio1 = 1; // Direto
                          }
                          else
                            if (document.getElementById("Ptconvencional").checked === true) {
                              plantio1 = 2; // convencional
                            }
                            else
                              plantio1 = 0;

                          plantio = parseInt(plantio1);
                          if (parseInt(plantio) == 0) {

                            alert("Escolha o tipo de plantio.");

                            flag = 0;
                          }
                          else {



                            if (!validaArea()) {

                              flag = 0;

                            }
                            else
                              flag = 1;

                          } //ok


                        } // ok


                      }//ok


                    } // ok

                }

              }
            }
        }
        
        if (flag == 0) {
          event.preventDefault()
          return;
        }

        sessionStorage.setItem("cidade", cidade);
        sessionStorage.setItem("identificacao", identifier);
        sessionStorage.setItem("dataplantio", document.getElementById("calendario").value);
        sessionStorage.setItem("area", document.getElementById("area").value);
        sessionStorage.setItem("eficiencia", opcao);
        sessionStorage.setItem("laminaAplicada", document.getElementById("norma").value);
        sessionStorage.setItem("solo", solo);
        sessionStorage.setItem("plantio", plantio);
        sessionStorage.setItem("estacao", estacao);

        window.document.form1.enctype = "multipart/form-data";
        window.document.form1.method = "post";
        window.document.form1.action = "calculaLamina.php";
        window.document.form1.submit();
        
        //return flag;
      }

      function toggleStation(){
        let estacao_select = document.getElementById("estacao_select");

        estacao_select.disabled = !estacao_select.disabled; 

        if(estacao_select.disabled){
          estacao_select.selectedIndex = 0;
        }
      }
    </script>
</html>